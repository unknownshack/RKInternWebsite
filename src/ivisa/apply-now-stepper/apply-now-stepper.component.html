<div *ngIf="showAlert">
  <alert [dismissOnTimeout]="2000" type="success" (onClosed)="onAlertClose()">
    You have successfully made the payment.
  </alert>
</div>
<div class="pb-8">
  <div class="mb-12 sm:mb-0 container">
    <div class="block text-left w-full mt-8 sm:mt-4 sm:mb-8">
      <div>
        <div class="text-gray-900 flex items-center mb-2"><span> {{travelCountry}} </span></div>
        <h1 class="m-0 text-2xl sm:text-4xl flex items-center">
          <div><span class="block sm:hidden">Visitor Visa</span><span class="hidden sm:block">Visitor Visa â€¢ 10 years,
              Multiple Entry</span></div>
        </h1>
      </div>
    </div>
    <mat-stepper #stepper>
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel>Trip Details</ng-template>

        <div class="flex flex-col w-full items-start md:flex-row">

          <div id="question-container" class="flex-1 flex-col lg:flex-row items-start w-full">

            <div class="w-full mx-auto order-2 lg:order-none order-2 lg:pr-8">
              <div>
                <div class="mb-4 bg-white pb-4 rounded-md border-1 border-solid  md:border-gray-300">
                  <div
                    class="w-full leading-tight text-xl sm:text-2xl flex items-center justify-between mt-4 md:mt-0 py-4 md:p-6 relative rounded-lg text-dark font-bold">
                    <div class="bg-black absolute top-0 left-0 w-1 h-full" style="border-top-left-radius: inherit;">
                    </div><span class="ml-4 md:ml-0">Your Trip Details</span>
                  </div>

                  <!--Write form here-->
                  <form class="mx-5 mt-2" [formGroup]="form" [class.was-validated]="tripDetailsIsFormSubmitted">
                    <div class="form-group">
                      <label for="arrivalDate">When is your arrival date?</label>
                      <input type="text" formControlName="arrivalDate" placeholder="mm-dd-yyyy" class="form-control"
                        bsDatepicker [ngClass]="{
                        'is-invalid':
                        tripDetailsIsFormSubmitted &&
                            form.controls['arrivalDate'].errors
                    }" required>
                      <!-- <div class="invalid-feedback" *ngIf="tripDetailsIsFormSubmitted && form.controls['arrivalDate'].errors?.['required']">
                        Arrival date needs to be selected.
                      </div> -->
                    </div>
                    <div class="form-group">
                      <label for="returnDate">When is your return date?</label>
                      <input formControlName="returnDate" type="text" placeholder="mm-dd-yyyy" class="form-control"
                        bsDatepicker [ngClass]="{
                        'is-invalid':
                        tripDetailsIsFormSubmitted &&
                            form.controls['returnDate'].errors
                    }" required>

                    </div>
                    <div class="form-group">
                      <label for="phone">Phone Number</label>
                      <div class="row">
                        <div class="col-3 pr-1">
                          <app-dropdown></app-dropdown>
                        </div>
                        <div class="col-6 pl-0">
                          <input type="number" placeholder="Phone Number" class="form-control" formControlName="phone"
                            [ngClass]="{
                            'is-invalid':
                            tripDetailsIsFormSubmitted &&
                                form.controls['phone'].errors
                        }" required>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="email">Email</label>
                      <div class="row">
                        <div class="col-9">
                          <input type="text" placeholder="abc@email.com" class="form-control" formControlName="email"
                            [ngClass]="{
                            'is-invalid':
                            tripDetailsIsFormSubmitted &&
                                form.controls['email'].errors
                        }" required>
                        </div>
                      </div>
                    </div>
                    <button class="btn btn--primary btn--std btn--full btnContinue" (click)="submitStep1Form()"
                      id="btnContinueSidebar" type="submit" data-btn-text="Save &amp; Continue">
                      <span class="">Save &amp; Continue</span>
                    </button>
                  </form>
                </div>


              </div>
            </div>
          </div>
          <div class="flex flex-col sticky lg:w-1/3">
            <app-side-banner></app-side-banner>
          </div>
        </div>
      </mat-step>
      <mat-step label="Your Info">
        <div class="flex flex-col w-full items-start md:flex-row">

          <div id="question-container" class="flex-1 flex-col lg:flex-row items-start w-full">

            <div class="w-full mx-auto order-2 lg:order-none order-2 lg:pr-8">
              <div class="mb-4 bg-white pb-4 rounded-md border-1 border-solid">
                <div
                  class="w-full leading-tight text-xl sm:text-2xl flex items-center justify-between mt-4 md:mt-0 py-4 md:p-6 relative rounded-lg text-dark font-bold">
                  <div class="bg-black absolute top-0 left-0 w-1 h-full" style="border-top-left-radius: inherit;">
                  </div><span class="ml-4 md:ml-0">Your Personal Details</span>



                </div>
                <form class="mx-5 mt-2" [formGroup]="secondForm" [class.was-validated]="isYourDetailsFormSubmitted">
                  <div class="form-group">
                    <label for="exampleInputEmail1">First and Middle Name</label>
                    <input type="text" placeholder="John William" class="form-control" formControlName="firstName"
                      [ngClass]="{
                            'is-invalid':
                            isYourDetailsFormSubmitted &&
                            secondForm.controls['firstName'].errors
                        }" required>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1">Last Name</label>
                    <input type="text" placeholder="Doe" class="form-control" formControlName="lastName" [ngClass]="{
                            'is-invalid':
                            isYourDetailsFormSubmitted &&
                            secondForm.controls['lastName'].errors
                        }" required>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1">Gender</label>
                    <select [(ngModel)]="genderValue" class="form-control" formControlName="gender" [ngClass]="{
                            'is-invalid':
                            isYourDetailsFormSubmitted &&
                            secondForm.controls['gender'].errors
                        }" required>
                      <option [value]="">Male</option>
                      <option [value]="">Female</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Date of Birth</label>
                    <input type="type" placeholder="mm-dd-yyyy" class="form-control" bsDatepicker formControlName="dob"
                      [ngClass]="{
                            'is-invalid':
                            isYourDetailsFormSubmitted &&
                            secondForm.controls['dob'].errors
                        }" required>
                  </div>
                  <button class="btn btn--primary btn--std btn--full btnContinue" (click)="submitStep2Form()"
                    id="btnContinueSidebar" type="submit" data-btn-text="Save &amp; Continue">
                    <span class="">Save &amp; Continue</span>
                  </button>
                </form>
              </div>
            </div>
          </div>
          <div class="flex flex-col sticky lg:w-1/3" style="">
            <app-side-banner></app-side-banner>
          </div>
        </div>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup" label="Services">
        <div class="flex flex-col w-full items-start md:flex-row">

          <div id="question-container" class="flex-1 flex-col lg:flex-row items-start w-full">
            <div class="w-full mx-auto order-2 lg:order-none order-2 lg:pr-8">
              <div>
                <div class="mb-4 bg-white pb-4 rounded-md border-1 border-solid  md:border-gray-300">
                  <div
                    class="w-full leading-tight text-xl sm:text-2xl flex items-center justify-between mt-4 md:mt-0 py-4 md:p-6 relative rounded-lg text-dark font-bold">
                    <div class="bg-black absolute top-0 left-0 w-1 h-full" style="border-top-left-radius: inherit;">
                    </div><span class="ml-4 md:ml-0">Processing Time &amp; Fee</span>
                    <div class="flex">


                    </div>
                  </div>

                  <div class="w-full md:px-0 pt-5 flex flex-col justify-center">
                    <div class="card-body md:px-5">
                      <div class="form-row flex flex-col lg:flex-row">
                        <div class="form-group flex flex-col justify-start max-w-full col-12 col-md-12">
                          <div class="ivisa-input-wrapper w-full h-full" data-ivisa-slug="product_add_ons"
                            data-ivisa-question-selector="general.product_add_ons">
                            <div class="w-full h-full" data-v-402b6d91="">

                              <div class="relative" data-v-402b6d91="">

                                <div modelmodifiers="[object Object]" data-v-402b6d91="">

                                  <div>
                                    <div class="bold text-base mb-6">1. Choose an option</div>
                                    <div
                                      class="border-1 border-gray-300 flex border-3 rounded-md mb-4 hover:border-secondary transition-colors duration-150 ease-out cursor-pointer relative">
                                      <div
                                        class="bg-blue-100 text-2xl md:text-3xl lg:text-4xl w-1/3 rounded-l-md bold flex flex-col items-center justify-center relative overflow-hidden"
                                        data-dusk="subscription-add-on">
                                        <img class="absolute w-full" src="" alt=""><span class="-mb-2">Roger<span
                                            class="text-primary">+</span></span>

                                      </div>
                                      <div class="px-2 py-1 rounded-full text-white bg-green-500 absolute text-xs bold"
                                        style="top: -0.7rem; right: 1rem;">Recommended</div>
                                      <div class="p-6 w-2/3">
                                        <p class="bold text-xl mb-4">Save USD $112.49!</p>
                                        <p class="text-sm">Discount on all Roger processing fees for USD $89.99/year
                                          <span class="text-primary underline">Learn more</span>
                                        </p>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                              </div>


                            </div>
                          </div>

                        </div>
                        <div class="form-group flex flex-col justify-start max-w-full col-12 col-md-12">
                          <div class="ivisa-input-wrapper w-full h-full" data-ivisa-slug="visa_processing_speed"
                            data-ivisa-question-selector="general.visa_processing_speed">
                            <div class="w-full h-full" data-v-402b6d91="">

                              <div class="relative" data-v-402b6d91="">

                                <div modelmodifiers="[object Object]" data-v-402b6d91="">
                                  <div class="bold text-base mb-4">2. Choose your processing time</div>
                                  <ul class="list">
                                    <li
                                      class="flex justify-between items-center py-2 px-4 mb-3 rounded-xl border-1 border-primary border-secondary border-3 selected-option cursor-pointer"
                                      data-dusk="Standard">
                                      <div class="info flex flex-col items-start"><span
                                          class="days text-xl text-primary">Standard</span><span
                                          class="ppa text-md text-dark">Price per applicant</span></div>
                                      <div class="price text-xl"><span class="text-dark">USD $224.99</span>
                                      </div>
                                    </li>
                                  </ul>
                                </div>

                              </div>


                            </div>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>


              </div>



            </div>
          </div>
          <div class="flex flex-col sticky lg:w-1/3" style="">
            <app-side-banner></app-side-banner>
          </div>
        </div>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Checkout</ng-template>
        <div class="flex flex-col w-full items-start md:flex-row">

          <div id="question-container" class="flex-1 flex-col lg:flex-row items-start w-full">

            <div class="w-full mx-auto order-2 lg:order-none order-2 lg:pr-8">
              <div id="paynow">

                <div class="w-full" style="">


                  <div class="payment__card payment relative flex flex-col bg-white bg-clip-border mb-4">
                    <div class="overflow-hidden bg-white rounded-md border-1  md:border-gray-300 md:px-6">
                      <div class="flex items-center justify-between py-3 border-b border-gray-300">
                        Select a payment method. All transactions are safe and secure</div>
                      <div class="pt-2 w-full">
                        <div class="flex items-center justify-between">
                          <div class="font-bold">Credit / Debit Card</div>
                        </div>
                        <div class="mt-2">
                          <div class="form-group">
                            <label>Card Holder Name </label>
                            <input type="text" class="form-control">
                          </div>
                          <div class="form-group">
                            <label>Card Number</label>
                            <input type="number" class="form-control">
                          </div>
                          <div class="form-group">
                            <label>Expiry Date</label>
                            <input type="text" class="form-control" bsDatepicker>
                          </div>

                          <div class="form-group">
                            <label>Security Code</label>
                            <input type="number" class="form-control">
                          </div>

                          <div class="text-center flex flex-col md:flex-row items-center justify-center mt-4 lg:hidden">
                            <img src="https://d16zz69zs6o3lx.cloudfront.net/img/payment/safe-checkout.png"
                              alt="Safe checkout" class="border-0 mr-2" style="height: 45px;">
                            <div class="mt-4 md:mt-0 w-full"><button class="btn btn--primary btn--std btn--full"
                                id="btnSubmitPaymentMobile" type="submit" data-btn-text="Submit Payment"><span
                                  class="">Submit
                                  Payment</span>
                              </button></div>
                          </div>
                        </div>
                      </div>
                      <div class="relative py-4 mt-6">
                        <div class="absolute inset-0 flex items-center justify-center">
                          <div class="w-full sm:w-1/2 border-b border-gray-300"></div>
                        </div>
                        <div class="relative flex justify-center"><span class="bg-white px-4 text-sm">Or Pay With</span>
                        </div>
                      </div>
                      <ul role="list" class="pl-0 pb-0">

                        <li class="flex items-center justify-between p-3 border-b border-gray-300">
                          <div> Paypal </div>
                          <img src="https://d16zz69zs6o3lx.cloudfront.net/img/payment/paypal.png" alt="Venmo">
                        </li>

                        <li class="flex items-center justify-between p-3 border-b border-gray-300">
                          <div> Venmo </div><button id="venmo-button"><img
                              src="https://d16zz69zs6o3lx.cloudfront.net/img/payment/venmo.png" alt="Venmo"></button>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <h3 class="py-3" style="display: none;">Other Payments</h3>
                  <div class="relative flex flex-col bg-white bg-clip-border my-4" style="display: none;">
                    <form id="payment-form" class="">
                      <div id="payment-element"></div>
                      <div id="error-message"></div>
                    </form>
                  </div>
                  <div>

                  </div>

                  <div id="device-fingerprint" class="hidden"></div>
                  <div class="bg-white popup" role="dialog" aria-modal="true" style="display: none;">
                    <div class="bg-white popup-inner three-ds rounded-lg relative w-1/2">
                      <main class="h-full" id="challenge-modal">
                        <div id="challenge"></div>
                      </main>
                    </div>
                  </div>
                </div>
              </div>
              <div class="flex mt-4 lg:hidden justify-between"><button
                  class="btn btn--secondary btn--std mr-3 btnPrevious" id="btnPreviousUnderSection"
                  data-btn-text="Previous"><span class="">Previous</span>
                </button>



              </div>
            </div>
            <div style="margin-bottom: 150px;"></div>
          </div>
          <div class="flex flex-col sticky lg:w-1/3" style="">
            <div class="hidden lg:block">
              <div class="text-black" dusk="product-sidebar-summary">
                <div class="sticky">
                  <div class="lg:hidden mb-4 flex items-center justify-between">
                    <p class="m-0 text-xl">Price Breakdown</p><span class="cursor-pointer">
                      <div class="inline-block"><svg
                          class="v2-h-36 v2-w-36 h-6 w-6 mr-2 ml-2 v2-mr-8 v2-ml-8 text-gray-500 "
                          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                          <path fill-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                        </svg>
                      </div>
                    </span>
                  </div>
                  <div class="border-1 rounded-md border-solid border-gray-300 mb-4">
                    <div class="mb-4 bg-gray-100 p-4 rounded-md">
                      <div class="flex justify-between items-center mb-1"><span class="bold">Documents</span><span
                          class="text-xs">1 Applicant</span></div>
                      <div class="text-xs">Canada Visitor Visa (10 years, Multiple Entry)</div>
                    </div>
                    <div class="mb-4 text-xs px-4">
                      <div class="flex justify-between mb-1"><span class="mr-4">Government Fees</span><span
                          class="text-black">139.00</span></div>
                      <div class="flex justify-between mb-1"><span class="mr-4">Processing speed (Standard) </span><span
                          class="text-black">224.99</span></div>
                      <div class="flex justify-between mb-1"><span class="mr-4">Roger - Individual Subscription (1
                          year)</span><span class="text-black">89.99</span></div>
                      <div class="flex justify-between mb-1"><span class="mr-4">Roger Membership
                          Discount</span><span class="text-red-500">-112.49</span></div>

                    </div>
                  </div>
                  <div class="mb-4 ml-4">
                    <div class="coupon flex flex-col py-3 md:py-0">
                      <div class="items-center justify-between flex">
                        <div class="">
                          <div class="text-sm text-black">Have a coupon code?</div>

                        </div>
                        <div class="w-1/2 text-sm shadow-md justify-between validation rounded-lg bg-white flex"><input
                            class="w-3/4 border-0 px-3 rounded-lg outline-none" id="promo_code" name="promotion-code"
                            placeholder="Enter code">
                          <button class="btn btn-- btn--small btn--icon flex flex-row-reverse border-0 mr-3"
                            id="coupon_button" type="submit" data-btn-text="arrow-right"><span class=""></span>
                            <div class="inline-block"><svg class="v2-h-18 v2-w-18 h-3 w-3 ml-2 v2-ml-8 text-primary "
                                fill="currentColor" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) -->
                                <path
                                  d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z">
                                </path>
                              </svg></div>
                          </button>
                        </div>
                      </div>

                    </div>
                  </div>
                  <div class="px-4">
                    <div class="flex justify-between bold"><span>Total</span><span>USD $341.49</span></div>
                    <div class="flex justify-between text-xs text-gray-900 mb-2"><span>For all
                        applicants</span><span>(Includes taxes and fees)</span></div>
                  </div>
                </div>
                <div class="hidden lg:block w-full mt-8">
                  <button (click)="submitPayment()" class="btn btn--primary btn--std btn--full" id="btnSubmitPayment"
                    type="submit" [disabled]="showAlert" data-btn-text="Submit Payment"><span class="">Submit
                      Payment</span>
                  </button>
                  <button class="btn btn--navigation btn--std btn--icon btn--icon--left  btnPrevious"
                    id="btnPreviousSidebar" data-btn-text="Previous"><span class="">Previous</span>

                  </button>
                </div>
              </div>
            </div>


            <div class="left-0 bottom-0 w-full fixed md:hidden bg-white p-4"
              style="z-index: 1000; box-shadow: rgba(17, 18, 17, 0.18) 0px 0px 16px 0px;">
              <div class="flex justify-between items-center">
                <p class="text-dark mb-0 leading-none"><span><span class="bold text-lg">Total: 341.49</span><span
                      class="ml-1 text-lg bold">USD</span></span></p>

              </div>
            </div>
          </div>
        </div>
      </mat-step>
    </mat-stepper>
  </div>

</div>